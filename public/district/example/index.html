<!doctype html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://use.typekit.net/kdc4trt.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.4/css/jquery.dataTables.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
          integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../static/districts.css" />
    <link rel="stylesheet" href="../../static/search-inside.css">
    <link rel="stylesheet" href="https://use.typekit.net/ipw6blv.css">
    <title>Abbeville County School District</title>
</head>

<body>
<div class="search-block">
    <div class="app-search">
        <a href="../../"><img src="../../static/home.png"></a>
        <div class="search-row">
            <input id="fill-box" type="text" placeholder="Search school or district ...">
            <i class="fa fa-search"></i>
        </div>
    </div> <!-- closes app search -->
    <div id="suggestions-list" class="list-items"></div>
</div> <!-- closes search block -->
<div class="container">
    <div class="title-text">
        <h1>Abbeville County School District</h1>
        <h2><span id="student-count"></span> students</h2>
        <h4>400 Greenville St, Abbeville</h4>
        <h4>864-366-5427, <a href="https://acsdsc.org" target="_blank">website</a></h4>
    </div>
    <div class="row">
        <div class="col-12 col-md-6 graphic">
            <div id='map' class="graphic-style"></div>
        </div>
        <div class="col-12 col-md-6 graphic">
            <div class="school-col-inner">
                <h4>Find a school in this district</h4>
                <div class="inner-text">
                    <ul>



















                        <li><a href="../../school/0160001/">Abbeville High School</a></li>

























                        <li><a href="../../school/0160003/">Dixie High School</a></li>





















                        <li><a href="../../school/0160007/">John C. Calhoun Elementary School</a></li>





















                        <li><a href="../../school/0160016/">Wright Middle School</a></li>





















                        <li><a href="../../school/0160017/">Westwood Elementary</a></li>

































                        <li><a href="../../school/0160018/">Cherokee Trail Elementary</a></li>





                        <li><a href="../../school/0160018/">Cherokee Trail Elementary</a></li>





































                        <li><a href="../../school/0160019/">Diamond Hill Elementary</a></li>





                        <li><a href="../../school/0160019/">Diamond Hill Elementary</a></li>



































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































                    </ul>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-12 graphic">
            <div class="graphic-style">
                <h5>Racial composition of district</h5>
                <div id="chart-race"></div>
            </div>
        </div>
        <div class="col-12 col-md-12 graphic">
            <div class="graphic-style">
                <h5>Pupils in poverty</h5>
                <div id="chart-poverty"></div>
            </div>
        </div>
        <div class="col-12 col-md-4 graphic">
            <div class="graphic-style">
                <h5>Reading expectations</h5>
                <div id="chart-readingexp"></div>
            </div>
        </div>
        <div class="col-12 col-md-4 graphic">
            <div class="graphic-style">
                <h5>Math expectations</h5>
                <div id="chart-mathexp"></div>
            </div>
        </div>
        <div class="col-12 col-md-4 graphic">
            <div class="graphic-style">
                <h5>Science expectations</h5>
                <div id="chart-scienceexp"></div>
            </div>
        </div>
        <div class="col-12 col-md-6 graphic">
            <div class="graphic-style">
                <h5>eng</h5>
                <div id="chart-englishscores"></div>
            </div>
        </div>
        <div class="col-12 col-md-6 graphic">
            <div class="graphic-style">
                <h5>alg</h5>
                <div id="chart-algebrascores"></div>
            </div>
        </div>
        <div class="col-12 col-md-12 graphic">
            <div class="graphic-style">
                <h5>Graduation</h5>
                <div id="chart-graduation"></div>
            </div>
        </div>
        <div class="col-12 col-md-4 graphic">
            <div class="graphic-style">
                <div id="chart-studentexpenditure"></div>
            </div>
        </div>
        <div class="col-12 col-md-4 graphic">
            <div class="graphic-style">
                <div id="chart-teacherpay"></div>
            </div>
        </div>
        <div class="col-12 col-md-4 graphic">
            <div class="graphic-style">
                <div id="chart-childsafe"></div>
            </div>
        </div>
        <div class="col-12 col-md-4 graphic">
            <div class="graphic-style">
                <div id="chart-teachersafe"></div>
            </div>
        </div>
        <div class="col-12 col-md-4 graphic">
            <div class="graphic-style">
                <div id="chart-violent"></div>
            </div>
        </div>
        <div class="col-12 col-md-4 graphic">
            <div class="graphic-style">
                <div id="chart-nonviolent"></div>
            </div>
        </div>
        <div class="col-12 col-md-4 graphic">
            <div class="graphic-style">
                <div id="chart-harrassment"></div>
            </div>
        </div>
    </div>  <!-- ends row -->

    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Orci dapibus ultrices in iaculis nunc sed augue lacus viverra. Congue quisque egestas diam in. Commodo elit at imperdiet dui accumsan sit amet. Lacus luctus accumsan tortor posuere ac ut consequat semper. Ut lectus arcu bibendum at varius vel pharetra vel. Vel turpis nunc eget lorem dolor. Purus sit amet luctus venenatis lectus magna fringilla. Massa massa ultricies mi quis hendrerit dolor magna. Enim blandit volutpat maecenas volutpat blandit aliquam. Mauris cursus mattis molestie a iaculis at. Libero nunc consequat interdum varius sit amet mattis vulputate enim. Elementum facilisis leo vel fringilla est ullamcorper. Accumsan in nisl nisi scelerisque eu ultrices vitae auctor. Tristique senectus et netus et malesuada fames ac. Hendrerit dolor magna eget est lorem. Nec feugiat nisl pretium fusce id velit ut. Lectus magna fringilla urna porttitor. Eleifend quam adipiscing vitae proin sagittis nisl rhoncus mattis. Varius duis at consectetur lorem donec massa.</p>
</div> <!-- closes container -->
<footer>
    <p>© 2022, Post and Courier</p>

</footer>

<!-- d3 -->
<script src="https://d3js.org/d3.v7.min.js"></script>

<!-- fuse -->
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.1"></script>

<!-- leaflet -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js"></script>

<!-- jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<script src="../../static/search.js"></script>

<!-- custom javascript -->
<script>

    // // // // // // // // // // // //
    // // // // // // MISC. FUNCTIONS AND SCRIPTS
    // // // // // // // // // // // //

    // function to fromat numbers

    function formatComma(float){
        num = Math.round(float)
        return num.toLocaleString("en-US")
    }

    // inject total enrolled students
    d3.select("#student-count")
        .text(formatComma(2986))


    // // // // // //
    // // // MAP SCRIPT
    // // // // // //

    function districtMap() {
        let latList = [];
        let lonList = []




















        latList.push(34.18729295)
        lonList.push(-82.37512602814299)



























        latList.push(34.328243)
        lonList.push(-82.387977)























        latList.push(34.103731350000004)
        lonList.push(-82.59765548642402)























        latList.push(34.18642145)
        lonList.push(-82.40282005303362)

























































        latList.push(34.3641167)
        lonList.push(-82.35564697187262)







        latList.push(34.3641167)
        lonList.push(-82.35564697187262)







































        latList.push(34.2559676)
        lonList.push(-82.56481013387005)







        latList.push(34.2559676)
        lonList.push(-82.56481013387005)




































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































        var map = L.map('map', {
            scrollWheelZoom: false,
        })
        if(latList[0]){
            map.setView([latList[0], lonList[0]], 9);
        } else{
            map.setView([33.4, -81.1], 7);
        }

        L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiYWFkaXR0YW1iZSIsImEiOiJja3R2eDFjZjMyZXJxMnhwcTR0Y3F5eGk2In0.9AAyIXkTkCMcZ8NNlDPB9g', {
            maxZoom: 18,
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, ' +
                'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
            id: 'mapbox/light-v9',
            tileSize: 512,
            zoomOffset: -1
        }).addTo(map);





















        var marker = L.marker([34.18729295, -82.37512602814299 ]).addTo(map)
            .bindPopup('<b><a href="../../school/0160001">Abbeville High School</a></b>');



























        var marker = L.marker([34.328243, -82.387977 ]).addTo(map)
            .bindPopup('<b><a href="../../school/0160003">Dixie High School</a></b>');























        var marker = L.marker([34.103731350000004, -82.59765548642402 ]).addTo(map)
            .bindPopup('<b><a href="../../school/0160007">John C. Calhoun Elementary School</a></b>');























        var marker = L.marker([34.18642145, -82.40282005303362 ]).addTo(map)
            .bindPopup('<b><a href="../../school/0160016">Wright Middle School</a></b>');

























































        var marker = L.marker([34.3641167, -82.35564697187262 ]).addTo(map)
            .bindPopup('<b><a href="../../school/0160018">Cherokee Trail Elementary</a></b>');







        var marker = L.marker([34.3641167, -82.35564697187262 ]).addTo(map)
            .bindPopup('<b><a href="../../school/0160018">Cherokee Trail Elementary</a></b>');







































        var marker = L.marker([34.2559676, -82.56481013387005 ]).addTo(map)
            .bindPopup('<b><a href="../../school/0160019">Diamond Hill Elementary</a></b>');







        var marker = L.marker([34.2559676, -82.56481013387005 ]).addTo(map)
            .bindPopup('<b><a href="../../school/0160019">Diamond Hill Elementary</a></b>');




































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































        //console.log(latList[1])
    }

    // // // // // //
    // // // FUNCTION TO PREP DATA FOR BAR CHART
    // // // // // //

    function cleanData(data, total) {
        const percent = d3.scaleLinear()
            .domain([0, total])
            .range([0, 100])
        let cumulative = 0
        const _data = data.map(d => {
            cumulative += d.value
            return {
                value: d.value,
                cumulative: cumulative - d.value,
                label: d.label,
                percent: percent(d.value)
            }
        }).filter(d => d.value > 0)
        return _data
    }

    // // // // // //
    // // // FUNCTION TO DRAW BAR CHART
    // // // // // //

    function drawBar(bind, data, config) {
        var chartWidth = $(bind).width();
        config = {
            f: d3.format('.1f'),
            margin: { top: 0, right: 0, bottom: 0, left: 0 },
            width: chartWidth,
            height: 200,
            barHeight: 100,
            colors: ['#F2734F', '#9264BA', '#82C566', '#984ea3','#F0DD67', '#1CAECC', '#ffff33'],
            ...config
        }
        const { f, margin, width, height, barHeight, colors } = config
        const w = width - margin.left - margin.right
        const h = height - margin.top - margin.bottom
        const halfBarHeight = barHeight / 2

        const total = d3.sum(data, d => d.value)
        const _data = cleanData(data, total)

        const xScale = d3.scaleLinear()
            .domain([0, total])
            .range([0, w])

        const selection = d3.select(bind)
            .append('svg')
            .attr('width', width)
            .attr('height', height)
            .append('g')
            .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')

        selection.selectAll('rect')
            .data(_data)
            .enter().append('rect')
            .attr('class', 'rect-stacked')
            .attr('x', d => xScale(d.cumulative))
            .attr('y', h / 2 - halfBarHeight)
            .attr('height', barHeight)
            .attr('width', d => xScale(d.value))
            .style('fill', (d, i) => colors[i])

        selection.selectAll('.text-percent')
            .data(_data)
            .enter().append('text')
            .attr('class', 'text-percent')
            .attr('text-anchor', 'middle')
            .attr('x', d => xScale(d.cumulative) + (xScale(d.value) / 2))
            .attr('y', (h / 2) - (halfBarHeight * 1.1))
            .text(d => f(d.percent) + ' %')

        selection.selectAll('.text-label')
            .data(_data)
            .enter().append('text')
            .attr('class', 'text-label')
            .attr('text-anchor', 'middle')
            .attr('x', d => xScale(d.cumulative) + (xScale(d.value) / 2))
            .attr('y', (h / 2) + (halfBarHeight * 1.1) + 20)
            .style('fill', (d, i) => colors[i])
            .text(d => d.label)
    }


    // // // // // //
    // // // FUNCTION TO DRAW DOT CHART
    // // // // // //

    function drawDot(graphic,dotData){
        var dotChartWidth = $(graphic).width()
        var list = []

        var margin = {
            top: 10,
            right: 20,
            bottom: 30,
            left: 20
        }
        var width = dotChartWidth - margin.left - margin.right
        var height = 70 + margin.top + margin.bottom;

        var tooltip = d3.select("body")
            .append("div")
            .append("p")
            .style("position", "absolute")
            .style("z-index", "10")
            .style("visibility", "hidden")
            .style("background", "#262B28")
            .style("padding-top", "5px")
            .style("padding-bottom", "5px")
            .style("padding-right", "5px")
            .style("padding-left", "5px")
            .style("border-radius", "5px")
            .style("color", "#F3F4F2")

        var group = d3.select(graphic)
            .append("div")
            .attr("class", "dot-holder")
            .style("padding-top",`${margin.top}px`)
            .style("padding-bottom",`${margin.bottom}px`)
            .style("width", `${dotChartWidth}px`)
            .style("height", `${height}px`)
            .selectAll("div")
            .data(dotData).enter()
            .append("div")
            .attr("class", "dot-group")
            .attr("id", function (d) { return d.label })

        var dots = group
            .selectAll(null)
            .data(function (d) {
                let l = []
                for (let step = 0; step < d.value; step++) {
                    l.push(d.color)
                }
                // console.log(l)
                return l
            })
            .enter()
            .append("div")
            .attr("class", "dot")
            .style('background-color', function (d) { return d })
            .on("mouseover", function (d, i) {
                var name;
                if (i == dotData[0].color) {
                    tooltip.text(`${dotData[0].label}: ${(dotData[0].value).toFixed(2)}%`)
                } if (i == dotData[1].color) {
                    tooltip.text(`${dotData[1].label}: ${(dotData[1].value).toFixed(2)}%`)
                }
                if(dotData[2]){ // Check if there's a third element
                    if (i == dotData[2].color) {
                        tooltip.text(`${dotData[2].label}: ${(dotData[2].value).toFixed(2)}%`)
                    }
                }
                //console.log(tooltip.text)
                return tooltip.style("visibility", "visible");
            })
            .on("mousemove", function (e) {
                // console.log(e)
                return tooltip
                    .style("top", (e.pageY - 10) + "px")
                    .style("left", (e.pageX + 10) + "px");

            })
            .on("mouseout", function () {
                return tooltip
                    .style("visibility", "hidden");
            })

        var anno = group
            .select(".dot")
            .append("span")
            .style("position", "relative")
            .style("top", "20px")
            //.style("left", function(d){
            //    if(d.label == "All other races"){
            //        if (d.value < 10){
            //            return "-90px"
            //        }
            //    } else if (d.label == "Not in poverty"){
            //        if (d.value < 10){
            //            return "-90px"
            //        }
            //    }
            //})
            //.style("white-space","nowrap")
            .text(function (d) { return (d.label) })
            .style("color", function (d) { return d.color })
    }

    // // // // // //
    // // // FUNCTION TO DRAW COMPARE PARALLEL LINE CHART
    // // // // // //

    function drawParallelLines(graphic, datapoints, datalabels){


        var chartWidth = $(graphic).width()
        var margin = {
            top: 20,
            right: 10,
            bottom: 20,
            left: 10
        }
        var width = chartWidth - margin.left - margin.right
        var height = 100 - margin.top - margin.bottom;

        var y = d3.scaleBand()
            .range([height, 0])
            .padding(0.4);

        var x = d3.scaleLinear()
            .range([0, width])
            .domain([0, width]);


        var svg = d3.select(graphic).append("svg")
            .attr("width", chartWidth)
            .attr("height", 120)
            .append("g")
            .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");


        var backgroundLines = svg.selectAll(null)
            // svg.selectAll("line")
            .data(datapoints)
            .enter().append("line")
            .attr("class", "line")
            .attr("stroke", "lightgray")
            .attr("stroke-width", 5)
            .attr("stroke-linecap","round")
            .attr("x1", function (d) {
                return 0;
            })
            .attr("y1", function (d, i) {
                return i * 50
            })
            .attr("x2", function (d) {
                // console.log(width)
                return (width)
            })
            .attr("y2", function (d, i) {
                return i * 50
            })

        var tooltip = d3.select("body")
            .append("div")
            .append("p")
            .style("position", "absolute")
            .style("z-index", "10")
            .style("visibility", "hidden")
            .style("background", "#262B28")
            .style("padding-top", "5px")
            .style("padding-bottom", "5px")
            .style("padding-right", "5px")
            .style("padding-left", "5px")
            .style("border-radius", "5px")
            .style("color", "#F3F4F2")

        var lines = svg.selectAll(null)
            .data(datapoints)
            .enter().append("line")
            .attr("class", "line")
            .attr("stroke", "#F2734F")
            .attr("stroke-width", 5)
            .attr("stroke-linecap","round")
            .attr("x1", function (d) {
                return 0;
            })
            .attr("y1", function (d, i) {
                return i * 50
            })
            .attr("x2", function (d) {
                // console.log(width * (d / 100))
                return (width * (d / 100))
            })
            .attr("y2", function (d, i) {
                return i * 50
            })
        // .on("mouseover", function (d, i) {
        //     tooltip.text(`${i}%`);
        //     return tooltip.style("visibility", "visible");
        // })
        // .on("mousemove", function (e) {
        //     // console.log(e)
        //     return tooltip
        //         .style("top", (e.pageY - 10) + "px")
        //         .style("left", (e.pageX + 10) + "px");

        //})
        // .on("mouseout", function () {
        //    return tooltip
        //        .style("visibility", "hidden");
        // });

        var dot = svg.selectAll(null)
            .data(datapoints)
            .enter().append('circle')
            .attr("class", "circle")
            .attr("cx", function (d) {
                return (width * (d / 100))
            })
            .attr("cy", function (d, i) {
                return i * 50;
            })
            .attr("r", "5")
            .attr("stroke-width", "3")
            .attr("fill", "#F2734F")

        var labels = svg.selectAll(null)
            .data(datalabels)
            .enter()
            .append("text")
            .attr("y", function (d, i) {
                return (i * 60) + 20;
            })
            .attr("x", 0)
            .attr("text-anchor", "start")
            .text(function (d) {
                return d
            });


        var value = svg.selectAll(null)
            .data(datapoints).enter()
            .append("text")
            .text(function (d) {
                //console.log(d)
                var num = (Math.round(d*10)/10).toLocaleString("en-US")
                return `${num}%`
            })
            .attr("y", function (d, i) {
                // console.log(y)
                return (i * 60) + 20;
            })
            .attr("x", function (d) {
                return width
            })
            .attr("text-anchor", "end")


    }

    // // // // // //
    // // // FUNCTION TO DRAW STAT CHART
    // // // // // //

    function drawStat(graphic,data){
        var chartWidth = $(graphic).width()

        var margin = {
            top: 0,
            right: 0,
            bottom: 25,
            left: 0
        }
        var width = chartWidth - margin.left - margin.right
        var height = 150 - margin.top - margin.bottom;

        const div = d3.select(graphic)
            .append("div")
            .style("width", `${width}px`)
            .style("height", `${height}px`)
            .style("text-align","center")
            .style("margin", "auto")
            .selectAll(null)
            .data(data)
            .enter()


        const num = div

            .append("h1")
            .text(function (d) {
                return `${d.value}`
            })
            //.style("font-size","84px")
            .style("color","#82C566")
            .style("font-family","miller-headline")
            .style("font-weight","700")

        const text = div
            .append("h5")
            .text(function (d) {
                //console.log(d)
                return d.label
            })

    }



    // // // // // //
    // // // FUNCTION TO DRAW LINE CHART
    // // // // // //
    function drawLine(graphic,data){
        var chartWidth = $(graphic).width()

        const margin = { top: 10, right: 30, bottom: 30, left: 60 },
            width = chartWidth - margin.left - margin.right,
            height = 200 - margin.top - margin.bottom;


        var tooltip = d3.select("body")
            .append("div")
            .append("p")
            .style("position", "absolute")
            .style("z-index", "10")
            .style("visibility", "hidden")
            .style("background", "#262B28")
            .style("padding-top", "5px")
            .style("padding-bottom", "5px")
            .style("padding-right", "5px")
            .style("padding-left", "5px")
            .style("border-radius", "5px")
            .style("color", "#F3F4F2")

        const svg = d3.select(graphic)
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", `translate(${margin.left},${margin.top})`);

        var div = d3.select(graphic).append("div")
            .attr("class", "tooltip")
            .style("opacity", 0)
            .style("background", "#262B28")
            .style("padding", "0px")
            .style("border-radius", "5px")
            .style("color", "#F3F4F2");

        const x = d3.scaleTime()
            .domain(d3.extent(data, function (d) {
                d.date = d3.timeParse("%Y")(d.date)
                // console.log(d.date)
                return d.date;
            }))
            .range([0, width])
        svg.append("g")
            .attr("transform", `translate(0, ${height})`)
            .call(d3.axisBottom(x)
                .ticks(d3.timeYear.every(1)));

        const y = d3.scaleLinear()
            .domain([0, 100])
            .range([height, 0]);
        svg.append("g")
            .call(d3.axisLeft(y)
                .tickFormat(function (d) {
                    if (d == 100) {
                        return `${d}%`
                    } else {
                        return d
                    }
                }));

        svg.append("path")
            .datum(data)
            .attr("fill", "none")
            .attr("stroke", "#F15062")
            .attr("stroke-width", 2)
            .attr("d", d3.line()
                .x(function (d) { return x(d.date) })
                .y(function (d) { return y(d.value) })
            )
            .on("mouseover", function (d, i) {
                // console.log(i)
            })

        svg.selectAll("dot")
            .data(data)
            .enter().append("circle")
            .attr("r", 5)
            .attr("cx", function (d) { return x(d.date); })
            .attr("cy", function (d) { return y(d.value); })
            .style("fill", "#1D8ACB")
            .on("mouseover", function (d, i) {
                //console.log(i.value)
                var num = (Math.round(i.value*10)/10).toLocaleString("en-US")
                tooltip.text(`${num}%`);
                return tooltip.style("visibility", "visible");
            })
            .on("mousemove", function (e) {
                // console.log(e)
                return tooltip
                    .style("top", (e.pageY - 10) + "px")
                    .style("left", (e.pageX + 10) + "px");

            })
            .on("mouseout", function () {
                return tooltip
                    .style("visibility", "hidden");
            });
    }


    // // // // // // // // // // // //
    // // // // // // DECLARE GLOBAL CONSTS WITH DATA
    // // // // // // // // // // // //

    let NA = 0 // handling for NA
    deleteLaterProg = 100 - 52.1;

    const dataMetProgBar = [
        { label: "Yes", value:  52.1 },
        { label:  "No", value:  deleteLaterProg },
    ]

    const dataRaceDot = [
        { label: 'White', value: 61.754855994641666, color: "#F2734F" },
        { label: 'Black', value: 34.09243134628265, color: "#82C566" },
        { label: 'All other races', value: 4.152712659075687, color: "#9264BA" },
    ]

    const deleteLaterPoverty = 100 - 69.05;
    const dataPovertyDot = [
        { label: 'In poverty', value: 69.05, color: "#F2734F" },
        { label: 'Not in poverty', value: deleteLaterPoverty, color: "#9264BA" }
    ]

    const dataGenderDot = [
        { label: 'Male', value: 52.64567983924984, color: "#F2734F" },
        { label: 'Female', value: 47.35432016075017, color: "#82C566" },
        { label: 'Not in poverty', value: 0, color: "#9264BA" }
    ]

    const dataReadingexpBar = [
        { label: "Yes", value:  49.7 },
        { label:  "No", value:  16 },
    ]

    const dataMathexpBar = [
        { label: "Yes", value:  62.7 },
        { label:  "No", value:  11.5 },
    ]

    const dataScienceexpBar = [
        { label: "Yes", value:  64.7 },
        { label:  "No", value:  13.1 },
    ]




    var graduation2018 = 83.870967742





    var dataEnglishscoresBar = [
        { label: "score a or b", value: 43.900000000000006 },
        { label: "score c or d", value: 34.2 },
        { label: "score f", value: 21.9 }
    ]

    var dataAlgebraBar = [
        { label: "score a or b", value: 61.599999999999994 },
        { label: "score c or d", value: 26.5 },
        { label: "score f", value: 11.8 }
    ]

    var graduation2019 = 83.544303797





    var dataEnglishscoresBar = [
        { label: "score a or b", value: 43.900000000000006 },
        { label: "score c or d", value: 34.2 },
        { label: "score f", value: 21.9 }
    ]

    var dataAlgebraBar = [
        { label: "score a or b", value: 61.599999999999994 },
        { label: "score c or d", value: 26.5 },
        { label: "score f", value: 11.8 }
    ]

    var graduation2019 = 83.544303797





    var graduation2021 = 88.613861386





    var graduation2017 = 87.755102041





    var graduation2020 = 85.572139303
































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































    var dataGraduationLine = [
        { date: "2017", value: graduation2017 },
        { date: "2018", value: graduation2018 },
        { date: "2019", value: graduation2019 },
        { date: "2020", value: graduation2020 },
        { date: "2021", value: graduation2021 },
    ];


    const dataExpenditureStat = [
        { label: 'Total per pupil expenditures', value: NA }
    ]

    const dataTeacherpayStat = [
        { label: 'Average teacher pay', value: `$${formatComma( 47735 )}` }
    ]

    const dataChildsafeStat = [
        { label: 'Percent parents who agree "my child feels safe at school"', value: `${formatComma( 83.6 )}%` }
    ]

    const dataTeachersafeStat = [
        { label: 'Teachers who agree "I feel safe at my school"', value: `${formatComma( 97.9 )}%` }
    ]

    const dataViolentassaultsStat = [
        { label: 'Number of violent assaults', value: `${formatComma( 0 )}` }
    ]

    const dataNonviolentassaultsStat = [
        { label: 'Number of nonviolent assaults', value: `${formatComma( 23 )}` }
    ]

    const dataHarrassmentStat = [
        { label: 'Number of incidents of bullying or harrassment', value: `${formatComma( NA )}` }
    ]

    // // // // // // // // // // // //
    // // // // // // CALL FUNCTIONS
    // // // // // // // // // // // //

    searchApp("district")
    districtMap()

    // charts:
    drawDot('#chart-race', dataRaceDot)
    drawDot('#chart-poverty', dataPovertyDot)

    drawBar('#chart-readingexp', dataReadingexpBar)
    drawBar("#chart-mathexp",dataMathexpBar)
    drawBar("#chart-scienceexp",dataScienceexpBar)

    drawBar("#chart-englishscores",dataEnglishscoresBar)
    drawBar("#chart-algebrascores",dataAlgebraBar)


    drawLine("#chart-graduation",dataGraduationLine)

    drawStat("#chart-studentexpenditure",dataExpenditureStat)
    drawStat("#chart-teacherpay",dataTeacherpayStat)
    drawStat("#chart-childsafe",dataChildsafeStat)
    drawStat("#chart-teachersafe",dataTeachersafeStat)
    drawStat("#chart-violent",dataViolentassaultsStat)
    drawStat("#chart-nonviolent",dataNonviolentassaultsStat)
    drawStat("#chart-harrassment",dataHarrassmentStat)

</script>

</body>
</html>